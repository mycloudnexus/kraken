---
kind: kraken.product.mapping.matrix
apiVersion: v1
metadata:
  key: mef.sonata.api.matrix.order.eline.add
  name: MEF Sonata API
  labels:
    mef-api-release: grace
  version: 18
spec:
  matrix:
    mef.sonata.api-target.order.eline.add:
      - name: product_type_eline_type
        path: "$.body.productOrderItem[*].product.productConfiguration.['@type']"
        expectType: EXPECTED
        value: ACCESS_E_LINE
      - name: action_add
        path: "$.body.productOrderItem[*].['action']"
        expectType: EXPECTED
        value: add
      - name: relatedContactInformation_emailAddress
        path: "$.body.relatedContactInformation[*]"
        expectType: EXPECTED_TRUE
        value: ${param.emailAddress}
        errorMsg: "relatedContactInformation.emailAddress should exist in request"
      - name: relatedContactInformation_name
        path: "$.body.relatedContactInformation[*]"
        expectType: EXPECTED_TRUE
        value: ${param.name}
        errorMsg: "relatedContactInformation.name should exist in request"
      - name: relatedContactInformation_number
        path: "$.body.relatedContactInformation[*]"
        expectType: EXPECTED_TRUE
        value: ${param.number}
        errorMsg: "relatedContactInformation.number should exist in request"
      - name: relatedContactInformation_role
        path: "$.body.relatedContactInformation[*]"
        expectType: EXPECTED_TRUE
        value: ${param.role}
        errorMsg: "relatedContactInformation.role should exist in request"
      - name: productOrderItem_id
        path: "$.body.productOrderItem[0].id"
        expectType: EXPECTED_EXIST
        value: true
        errorMsg: "productOrderItem.id should exist in request"
      - name: productOrderItem_requestedItemTerm_name
        path: "$.body.productOrderItem[0].requestedItemTerm.name"
        expectType: EXPECTED_EXIST
        value: true
        errorMsg: "requestedItemTerm.name should exist in request"
      - name: productRelationship_relationshipType_0
        path: "$.body.productOrderItem[0].product.productRelationship[0].relationshipType"
        expectType: EXPECTED_EXIST
        value: true
        errorMsg: "productRelationship[0].relationshipType should exist in request"
      - name: productRelationship_relationshipType_1
        path: "$.body.productOrderItem[0].product.productRelationship[1].relationshipType"
        expectType: EXPECTED_EXIST
        value: true
        errorMsg: "productRelationship[1].relationshipType should exist in request"
